import { NavLink } from "react-router-dom"
import styles from '../styles/modules/header.module.css';
import { useState, useRef } from "react";
import ToggleThemeBtn from "./ToggleThemeBtn";
import { useIsMobile } from "../utilities/IsMobile";
import { useClickOutside } from "../utilities/ClickOutside";

const Header = () => {
    const [showNav, setShowNav] = useState(false);
    const isMobile = useIsMobile();
    const wrapperRef = useRef("nav");
    useClickOutside(wrapperRef, () => {
        setShowNav(false);
    });

    const handleShowNav = () => {
        setShowNav(!showNav);
    };
    return (
        <header className={styles.header}>
            <nav >
                <NavLink to='/' className={styles.logo_link}>

                    <svg width="37" height="37" viewBox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <title>Melissa Goon's Logo</title>
                        <path className={styles.logo_bg} d="M18.5 0C19.8188 5.83942 26.52 8.61524 31.5816 5.41844C28.3848 10.48 31.1606 17.1812 37 18.5C31.1606 19.8188 28.3848 26.52 31.5816 31.5816C26.52 28.3848 19.8188 31.1606 18.5 37C17.1812 31.1606 10.48 28.3848 5.41844 31.5816C8.61524 26.52 5.83942 19.8188 0 18.5C5.83942 17.1812 8.61524 10.48 5.41844 5.41844C10.48 8.61524 17.1812 5.83942 18.5 0Z" fill="white" />
                        <path className={styles.logo_letter} d="M8.78133 24.3286V13.6989C8.78133 13.2358 8.68311 12.8359 8.48665 12.4991C8.29019 12.1623 8.04462 11.9939 7.74994 11.9939V11.5308C7.84817 11.5168 8.61294 11.0888 10.0443 10.2469C10.1425 10.2749 10.2618 10.317 10.4021 10.3732C10.5424 10.4153 10.7248 10.5486 10.9494 10.7731C11.1879 10.9976 11.3072 11.2572 11.3072 11.5519C11.3914 11.5098 11.6299 11.3765 12.0229 11.152C13.0613 10.5626 13.6998 10.2679 13.9383 10.2679C14.1909 10.2679 14.4645 10.3942 14.7592 10.6468C15.0679 10.8994 15.2995 11.2011 15.4538 11.5519C15.4819 11.5379 15.7696 11.3905 16.3168 11.1099C17.4114 10.5486 18.0709 10.2679 18.2954 10.2679C18.7445 10.2679 19.1655 10.5626 19.5584 11.152C19.9513 11.7413 20.1477 12.2816 20.1477 12.7727V23.3603C20.1477 24.1321 20.4915 24.5882 21.1791 24.7285V25.1916L18.8848 26.4756C18.5761 26.3493 18.2884 26.1458 18.0218 25.8651C17.7552 25.5705 17.6219 25.2968 17.6219 25.0442V14.7303C17.6219 13.8883 17.4815 13.306 17.2009 12.9832C16.9343 12.6464 16.4431 12.464 15.7275 12.4359V23.3603C15.7275 24.1321 16.0713 24.5882 16.7589 24.7285V25.1916L14.4645 26.4756C14.1558 26.3493 13.8681 26.1458 13.6015 25.8651C13.3349 25.5705 13.2016 25.2968 13.2016 25.0442V14.7303C13.2016 13.8462 13.0683 13.2428 12.8017 12.9201C12.5491 12.5973 12.0509 12.4359 11.3072 12.4359V23.234C11.3072 23.7532 11.3633 24.1251 11.4756 24.3496C11.5879 24.5741 11.8194 24.6864 12.1702 24.6864V25.3389L7.85518 27.1491L7.5184 26.4756C7.82712 26.4756 8.1218 26.2931 8.40245 25.9283C8.65504 25.5775 8.78133 25.0442 8.78133 24.3286Z" fill="#111111" />
                        <path className={styles.logo_letter} d="M25.8446 24.5391C26.1112 24.5391 26.3848 24.4268 26.6655 24.2023V21.487C26.6655 20.631 26.3778 20.1469 25.8025 20.0346V19.5715L27.9284 18.3717C28.2231 18.498 28.5108 18.7085 28.7914 19.0032C29.0721 19.2839 29.2124 19.5505 29.2124 19.8031V24.518C29.2124 24.6303 28.4406 24.9881 26.897 25.5915C25.3675 26.1809 24.4273 26.4756 24.0765 26.4756C23.7397 26.4756 23.3468 26.1739 22.8977 25.5705C22.4627 24.9671 22.2452 24.2444 22.2452 23.4024V12.2044C22.2452 12.1062 23.0451 11.7624 24.6448 11.173C26.2585 10.5696 27.1847 10.2679 27.4233 10.2679C27.5074 10.2679 27.6057 10.4714 27.7179 10.8783C27.8302 11.2853 27.9565 11.7764 28.0968 12.3518C28.2512 12.9271 28.4055 13.3551 28.5599 13.6357C28.7283 13.9024 29.037 14.0357 29.486 14.0357V14.4566C29.1773 14.597 28.6511 14.8496 27.9074 15.2144C27.1777 15.5652 26.7848 15.7406 26.7286 15.7406C26.5181 15.7406 26.2515 15.1723 25.9288 14.0357C25.606 12.885 25.3464 12.3097 25.15 12.3097C25.0096 12.3097 24.8833 12.3798 24.7711 12.5201V22.9814C24.7711 24.0199 25.1289 24.5391 25.8446 24.5391Z" fill="#111111" />
                    </svg>
                </NavLink>


                <div className={styles.menu_right} ref={wrapperRef}>
                    {!showNav && isMobile && <button onClick={handleShowNav} aria-controls="nav-menu" aria-expanded={showNav}>
                        <span className="screen-reader-text">Show Navigation</span>
                        ✦
                        <svg focusable="false" aria-hidden="true" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16 0C17.1406 5.05031 22.9362 7.45102 27.3138 4.68622C24.549 9.06382 26.9497 14.8594 32 16C26.9497 17.1406 24.549 22.9362 27.3138 27.3138C22.9362 24.549 17.1406 26.9497 16 32C14.8594 26.9497 9.06382 24.549 4.68622 27.3138C7.45102 22.9362 5.05031 17.1406 0 16C5.05031 14.8594 7.45102 9.06382 4.68622 4.68622C9.06382 7.45102 14.8594 5.05031 16 0Z" fill="white" />
                        </svg>
                        ✦

                    </button>}

                    <ul id="nav-menu" className={!showNav && isMobile ? `${styles.hidden}` : undefined} hidden={!showNav && isMobile}>
                        <li><NavLink to='/'>Home</NavLink></li>
                        <li><NavLink to='/about'>About</NavLink></li>
                        <li><NavLink to='/projects'>Projects</NavLink></li>

                    </ul>
                </div>

            </nav>

            <div className={styles.toggle_menu}>
                <ToggleThemeBtn />
            </div>
        </header>
    )
}

export default Header